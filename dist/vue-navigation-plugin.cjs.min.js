"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var instance=null,Navigation=function(){this.routes=[],this.observes={},this.cached={},this.allowEvents=["forward","back","refresh"],this.key="VUE_NAVIGATION_ROUTES",this._init()};Navigation.getInstance=function(){return instance instanceof Navigation||(instance=new Navigation),instance},Navigation.prototype._init=function(){if(window.sessionStorage.getItem(this.key))try{this.routes=JSON.parse(window.sessionStorage.getItem(this.key))}catch(t){this.routes=[]}},Navigation.prototype.diff=function(t,i){var e=this.routes.indexOf(t.fullPath);-1===e?this._forward(t.fullPath,t,i):e===this.routes.length-1?this._refresh(t,i):this._back(this.routes.length-1-e,t,i)},Navigation.prototype._refresh=function(t,i){this.emit("refresh",t,i)},Navigation.prototype._forward=function(t,i,e){this.routes.push(t),this._save(),this.emit("forward",i,e)},Navigation.prototype._back=function(t,i,e){this.routes.splice(this.routes.length-t,t),this._save(),this.emit("back",i,e)},Navigation.prototype._save=function(){try{window.sessionStorage.setItem(this.key,JSON.stringify(this.routes))}catch(t){}},Navigation.prototype._checkEvent=function(t){return!!~this.allowEvents.indexOf(t)||(console.warn("Only support "+this.allowEvents.join(",")+" for EventName."),!1)},Navigation.prototype._checkObserves=function(t){return this.observes[t]instanceof Array||(this.observes[t]=[]),this.observes[t].length},Navigation.prototype.on=function(t,i){this._checkEvent(t)&&(this._checkObserves(t),this.observes[t].push(i),this.cached[t]instanceof Array&&i.apply(null,this.cached[t]))},Navigation.prototype.off=function(t,i){if(this._checkEvent(t)&&this._checkObserves(t))for(var e=this.observes[t],n=e.length;n--;)if(i===e[n])return void e.splice(n,1)},Navigation.prototype.emit=function(t){for(var i=[],e=arguments.length-1;e-- >0;)i[e]=arguments[e+1];if(this._checkEvent(t)){if(this._checkObserves(t))for(var n=this.observes[t],s=n.length;s--;)n[s].apply(null,i);this.cached[t]=i}};var Navigation$1=Navigation.getInstance(),plugin={install:function(t,i){i.beforeEach(function(t,i,e){Navigation$1.diff(t,i),e()}),Object.defineProperty(t.prototype,"$navigation",{get:function(){return Navigation$1}})}},navigation=Navigation$1;exports.plugin=plugin,exports.navigation=navigation;
//# sourceMappingURL=vue-navigation-plugin.cjs.min.js.map