!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.vueNavigationPlugin={})}(this,function(t){"use strict";var e=null,s=function(){this.routes=[],this.observes={},this.cached={},this.allowEvents=["forward","back","refresh"],this.key="VUE_NAVIGATION_ROUTES",this._init()};s.getInstance=function(){return e instanceof s||(e=new s),e},s.prototype._init=function(){if(window.sessionStorage.getItem(this.key))try{this.routes=JSON.parse(window.sessionStorage.getItem(this.key))}catch(t){this.routes=[]}},s.prototype.diff=function(t,e){var s=this.routes.indexOf(t.fullPath);-1===s?this._forward(t.fullPath,t,e):s===this.routes.length-1?this._refresh(t,e):this._back(this.routes.length-1-s,t,e)},s.prototype._refresh=function(t,e){this.emit("refresh",t,e)},s.prototype._forward=function(t,e,s){this.routes.push(t),this._save(),this.emit("forward",e,s)},s.prototype._back=function(t,e,s){this.routes.splice(this.routes.length-t,t),this._save(),this.emit("back",e,s)},s.prototype._save=function(){try{window.sessionStorage.setItem(this.key,JSON.stringify(this.routes))}catch(t){}},s.prototype._checkEvent=function(t){return!!~this.allowEvents.indexOf(t)||(console.warn("Only support "+this.allowEvents.join(",")+" for EventName."),!1)},s.prototype._checkObserves=function(t){return this.observes[t]instanceof Array||(this.observes[t]=[]),this.observes[t].length},s.prototype.on=function(t,e){this._checkEvent(t)&&(this._checkObserves(t),this.observes[t].push(e),this.cached[t]instanceof Array&&e.apply(null,this.cached[t]))},s.prototype.off=function(t,e){if(this._checkEvent(t)&&this._checkObserves(t))for(var s=this.observes[t],i=s.length;i--;)if(e===s[i])return void s.splice(i,1)},s.prototype.emit=function(t){for(var e=[],s=arguments.length-1;s-- >0;)e[s]=arguments[s+1];if(this._checkEvent(t)){if(this._checkObserves(t))for(var i=this.observes[t],o=i.length;o--;)i[o].apply(null,e);this.cached[t]=e}};var i=s.getInstance(),o={install:function(t,e){e.beforeEach(function(t,e,s){i.diff(t,e),s()}),Object.defineProperty(t.prototype,"$navigation",{get:function(){return i}})}},n=i;t.plugin=o,t.navigation=n,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=vue-navigation-plugin.umd.min.js.map